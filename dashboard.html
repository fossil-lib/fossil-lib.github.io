<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fossil WrapDB</title>
    <link rel="stylesheet" href="assets/styles.css">
</head>

<body>
    <header>
        <div class="menu">
            <nav>
                <ul>
                    <li><a href="index">Home</a></li>
                    <li><a href="dashboard">Dashboard</a></li>
                    <li><a href="https://fossillogic.com/">Fossil Logic</a></li>
                </ul>
            </nav>
        </div>
        <div class="header">
            <h1>Fossil WrapDB</h1>
        </div>
    </header>
    <div class="search-container">
        <input type="text" id="searchInput" placeholder="Search by name...">
    </div>

    <div class="dashboard" id="dashboard">
    <table class="data-table">
        <thead>
            <tr>
                <!-- Table headers -->
                <th>Name</th>
                <th>Short Description</th>
                <th>License</th>
                <th>Author</th>
                <th>Release Date</th>
            </tr>
        </thead>
            <tbody id="tableBody">
                <!-- Rows will be added here dynamically -->
            </tbody>
        </table>
    </div>

    <script>
    // Load the JSON data
    fetch('wrapdb-fossil.json')
        .then(response => response.json())
        .then(data => {
            // Access the subprojects array from the JSON data
            const subprojects = data.subprojects;

            // Get the table body element
            const tableBody = document.getElementById('tableBody');

            // Create table rows for each subproject
            subprojects.forEach(subproject => {
                // Create a table row
                const row = tableBody.insertRow();

                // Create cells for each property in the subproject
                const properties = ['name', 'short_description', 'license', 'author', 'releases[0].date'];
                properties.forEach(property => {
                    const cell = row.insertCell();
                    cell.textContent = property.split('.').reduce((obj, key) => obj[key], subproject);
                });

                // Add a class to the row based on the license
                if (subproject.license === 'MPL 2.0') {
                    row.classList.add('mpl-licensed');
                }
            });
        })
        .catch(error => {
            console.error('Error fetching data:', error);
        });
    </script>
    <script src="assets/search.js"></script>
</body>

</html>
